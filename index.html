<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Great+Vibes&display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Playfair+Display&display=swap">
    <title>Commission_page</title>
</head>
<body>
    <button id="sidebar-toggle" onclick="toggleSidebar()">☰</button>
    <button id="access-toggle" aria-pressed="false" onclick="toggleAstigmatismMode()"></button>

    <div id="sidebar">
        <h3>Main pages</h3>
        <a href="budget_simulation.html">Budget simulator</a>
        <a href="commission_guide.html">Commission guide</a>
        <a href="portfolio.html">Portfolio</a>
    <h3>Prices</h3>
        <a href="sketch.html">Sketch prices</a>
        <a href="lineart.html">Lineart prices</a>
        <a href="flat.html">Flat prices</a>
        <a href="render.html">Render prices</a>
        <hr>
        <h3>Contact Me</h3>
        <a href="https://www.tumblr.com/blog/noveltale">Tumblr</a>
        <a href="https://www.instagram.com/suteki_koneko_/">Instagram</a>
    </div>
    <header class="title-wrapper">
        <img src="bubule.png" class="title-img" alt="Left image">
        <h1>Commission open!!</h1>
        <img src="bubule.png" class="title-img" alt="Right image">
    </header>


    <div class="cards-container">

        <div class="card-block" data-category="sketch">
            <h3>Sketch</h3>
            <a href="sketch.html">
                <div class="card">
                    <div class="card-inner">
                        <div class="card-front">
                            <img src="Commission_pictures/sketch.png" alt="">
                        </div>
                        <div class="card-back">
                            <p class="card-price">Chargement...</p>
                        </div>
                    </div>
                </div>
            </a>
        </div>

        <div class="card-block" data-category="lineart">
            <h3>Lineart</h3>
            <a href="lineart.html">
                <div class="card">
                    <div class="card-inner">
                        <div class="card-front">
                            <img src="Commission_pictures/lineart.png" alt="">
                        </div>
                        <div class="card-back">
                            <p class="card-price">Chargement...</p>
                        </div>
                    </div>
                </div>
            </a>
        </div>

        <div class="card-block" data-category="flat">
            <h3>Flat</h3>
            <a href="flat.html">
                <div class="card">
                    <div class="card-inner">
                        <div class="card-front">
                            <img src="Commission_pictures/flat.png" alt="">
                        </div>
                        <div class="card-back">
                            <p class="card-price">Chargement...</p>
                        </div>
                    </div>
                </div>
            </a>
        </div>

        <div class="card-block" data-category="render">
            <h3>Render</h3>
            <a href="render.html">
                <div class="card">
                    <div class="card-inner">
                        <div class="card-front">
                            <img src="Commission_pictures/render.png" alt="">
                        </div>
                        <div class="card-back">
                            <p class="card-price">Chargement...</p>
                        </div>
                    </div>
                </div>
            </a>
        </div>

    </div>

    <h4 class="contact-text">
    If you're interested, you can contact me on
    <a href="https://www.tumblr.com/blog/noveltale" class="contact-link">Tumblr</a>
    or
    <a href="https://www.instagram.com/suteki_koneko_/" class="contact-link">Instagram</a>
</h4>

<script>
    const STORAGE_KEY = 'astigmatismModeActive';
    const body = document.body;
    const toggleButton = document.getElementById('access-toggle');

    function updateButton(isActive) {
        if (toggleButton) {
            toggleButton.setAttribute('aria-pressed', isActive);
            toggleButton.textContent = isActive ? 'Astigmate mode (activated)' : 'Astigmate mode (deactivated)';
        }
    }

    function toggleAstigmatismMode() {
        const isActive = body.classList.toggle('astigmatism-mode');
        localStorage.setItem(STORAGE_KEY, isActive);
        updateButton(isActive);
    }

    function loadAstigmatismMode() {
        const isActive = localStorage.getItem(STORAGE_KEY) === 'true';
        if (isActive) {
            body.classList.add('astigmatism-mode');
        }
        updateButton(isActive);
    }

    function toggleSidebar() {
        const sidebar = document.getElementById('sidebar');
        sidebar.classList.toggle('visible');
    }

    loadAstigmatismMode();

    fetch('prices.json')
        .then(resp => resp.json())
        .then(data => {
            document.querySelectorAll('.card-block').forEach(card => {
                const category = card.dataset.category;
                if (data[category]) {
                    const values = Object.values(data[category]);
                    const minPrice = Math.min(...values);
                    const maxPrice = Math.max(...values);
                    card.querySelector('.card-price').textContent =
                        `Price : between  ${minPrice}€ and  ${maxPrice}€`;
                }
            });
        })
        .catch(error => console.error("Erreur chargement JSON :", error));
</script>

</body>
</html>